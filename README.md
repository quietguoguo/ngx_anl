# ngx_anl
目标是做一个在线编辑nginx配置文件，并实现在线检查的web界面
使用了codemirror作为文本编辑器。
思路：
1、从nginx.conf中读取includ的配置文件，从各个配置文件中读取servername 和 upsteam 然后根据所在的文件名分类生成呈现在里一个list.html。
2、在list.html中根据用户点选servername和upsteam ，从相应的配置文件中读取相应的配置。
读取方式为： 
将配置文件读入一个list中，根据正则匹配找到对应的servername 或者upsteam 关键字
如果是servername则继续线上查找server关键字，并记录list的行数，然后向下继续读取，根据{}的个数配置判断代码段结束行数。
如果是upsteam，则起始行数就是当前行，向下读取根据{}的个数配置判断代码段结束行数
以上两种放书可以获取相应的代码段的起始结束位置。
3、将第2步中的获取的代码段载入有codemiroor的页面show.html中，由用户进行编辑。（不太会做前端的东西，这个页面超级丑）
4、用户提交，由nginx进行检查（用户需要自己搭建nginx环境），如果正确，则写入；如果错误，则还原（这部分有点困惑，虽然已经做了备份，但是修改的代码段还是被放到文件的末尾）

目前做的就是这样子。
